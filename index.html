<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./layui/css/layui.css">
    <link rel="stylesheet" href="./css/style.css">
    <title>体育部管理员后台登陆</title>
</head>

<body>
    <!--SIGN UP-->
    <h1>体育部管理员后台</h1>
    <div class="login-form">
        <div class="clear"> </div>
        <div class="avtar">
            <img src="images/avtar.png" />
        </div>
        <form id="formSubmit" action="http://47.107.32.15:8080/sport/admin_manager_login" method="get">
            <input name="username" id="loginUsername" type="text" class="text" placeholder="请输入用户名">
            <div class="key">
                <input type="password" name="password" id="loginPassword" placeholder="请输入密码">
            </div>
            <div class="signin">
                <input type="submit" id="loginSubmit" value="Login">
            </div>
        </form>

    </div>
    <script src="./js/jquery-3.3.1.min.js"></script>
    <script src="./js/jquery.form.js"></script>
    <script src="./layui/layui.all.js"></script>
    <script>
        //存入cookie函数 ，如果后期有时间，最后用服务器来存cookie
        function writeCookie(name, value, hours) {
            var expire = "";
            if (hours != null) {
                expire = new Date((new Date()).getTime() + hours * 3600000);
                expire = "; expires=" + expire.toGMTString();
            }
            document.cookie = name + "=" + escape(value) + expire;
        }
        //JavaScript代码区域
        layui.use(['element'], function () {
            var element = layui.element;
            var $ = layui.jquery;
            // $("#loginSubmit").click(function () {
            //     $.ajax({
            //         type: "GET",
            //         url: "http://47.107.32.15:8080/sport/admin_manager_login?username=davont&password=123456",
            //         dataType: "json",
            //         // data: {
            //         //     'username': $("#loginUsername").val(),
            //         //     'password': $("#loginPassword").val()
            //         // },
            //         dataType: "jsonp",
            //         jsonp: "callback", // 必须，返回的响应需要以此为前缀
            //         success: function (data) {
            //             console.log(1);
            //             console.log(data);
            //             if (data.code == 0) {
            //                 alert("登陆成功！");
            //                 writeCookie("username", $("#loginUsername").val());
            //                 writeCookie("password", $("#loginPassword").val());
            //                 location.href = 'news.html';
            //             } else if (data.code == 1) {
            //                 alert("用户名或密码不对！");
            //             }
            //         },
            //         error: function (jqXHR) {
            //             console.log(2);
            //             console.log(jqXHR);
            //         }
            //     });
            // })
            $("#formSubmit").submit(function () {
                $(this).ajaxSubmit({
                    success: function (data) { // data 保存提交后返回的数据，一般为 json 数据
                        if (data.code == 0) {
                            alert("登陆成功！")
                            writeCookie("username", $("#loginUsername").val());
                            writeCookie("password", $("#loginPassword").val());
                            location.href = 'news.html';

                        } else {
                            console.log(data)
                        }
                    }
                });
                return false;
            });

        });
    </script>
    <script>

    </script>
</body>

</html>